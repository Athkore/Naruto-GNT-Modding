# SEQ Decompilation

This page includes information regarding the decompilation of the SEQ format and how it is parsed.

## SEQ Header

The file begins with a 16 byte header. Only the first three four-byte words are used. The last four bytes are always zero. The values of each word used by SEQ files in the game are:

<details>
  <summary>First word</summary>

- 0x01
- 0x02
- 0x04
- 0x05
- 0x06
- 0x07
- 0x08
- 0x09
- 0x0C
- 0x0E
- 0x10
- 0x11
- 0x16
- 0x1F

</details>

<details>
  <summary>Second Word</summary>

- 0x0010
- 0x0020
- 0x0025
- 0x0026
- 0x0027
- 0x0028
- 0x0029
- 0x002A
- 0x002B
- 0x002C
- 0x002D
- 0x002E
- 0x0035
- 0x0040
- 0x004E
- 0x006C
- 0x01A0
- 0x01B0
- 0x0A48

</details>

<details>
  <summary>Third Word</summary>

- 0x10
- 0x20
- 0x40

</details>

Here are the headers of each SEQ file in the game:

<details>
  <summary>Headers</summary>

```output
00000011 00000a48 00000040 00000000 /files/chr/ank/0000.seq
00000007 00000028 00000040 00000000 /files/chr/ank/0010.seq
00000001 00000027 00000040 00000000 /files/chr/ank/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/bou/0000.seq
00000007 00000028 00000040 00000000 /files/chr/bou/0010.seq
00000001 0000002c 00000040 00000000 /files/chr/bou/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/cho/0000.seq
00000007 00000028 00000040 00000000 /files/chr/cho/0010.seq
00000001 00000026 00000040 00000000 /files/chr/cho/1000.seq
00000001 0000004e 00000040 00000000 /files/chr/cmn/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/dog/0000.seq
00000007 00000028 00000040 00000000 /files/chr/dog/0010.seq
00000001 00000025 00000040 00000000 /files/chr/dog/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/gai/0000.seq
00000007 00000028 00000040 00000000 /files/chr/gai/0010.seq
00000001 0000002c 00000040 00000000 /files/chr/gai/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/gar/0000.seq
00000007 00000028 00000040 00000000 /files/chr/gar/0010.seq
00000001 0000002c 00000040 00000000 /files/chr/gar/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/hak/0000.seq
00000007 00000028 00000040 00000000 /files/chr/hak/0010.seq
00000001 00000025 00000040 00000000 /files/chr/hak/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/hi2/0000.seq
00000007 00000028 00000040 00000000 /files/chr/hi2/0010.seq
00000001 0000002c 00000040 00000000 /files/chr/hi2/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/hin/0000.seq
00000007 00000028 00000040 00000000 /files/chr/hin/0010.seq
00000001 00000025 00000040 00000000 /files/chr/hin/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/ino/0000.seq
00000007 00000028 00000040 00000000 /files/chr/ino/0010.seq
00000001 00000029 00000040 00000000 /files/chr/ino/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/iru/0000.seq
00000007 00000028 00000040 00000000 /files/chr/iru/0010.seq
00000001 00000025 00000040 00000000 /files/chr/iru/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/ita/0000.seq
00000007 00000028 00000040 00000000 /files/chr/ita/0010.seq
00000001 00000028 00000040 00000000 /files/chr/ita/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/jir/0000.seq
00000007 00000028 00000040 00000000 /files/chr/jir/0010.seq
00000001 00000025 00000040 00000000 /files/chr/jir/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/kab/0000.seq
00000007 00000028 00000040 00000000 /files/chr/kab/0010.seq
00000001 00000026 00000040 00000000 /files/chr/kab/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/kak/0000.seq
00000007 00000028 00000040 00000000 /files/chr/kak/0010.seq
00000001 0000002c 00000040 00000000 /files/chr/kak/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/kan/0000.seq
00000007 00000028 00000040 00000000 /files/chr/kan/0010.seq
00000001 00000025 00000040 00000000 /files/chr/kan/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/kar/0000.seq
00000007 00000028 00000040 00000000 /files/chr/kar/0010.seq
00000001 00000026 00000040 00000000 /files/chr/kar/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/kib/0000.seq
00000007 00000028 00000040 00000000 /files/chr/kib/0010.seq
00000001 00000025 00000040 00000000 /files/chr/kib/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/kid/0000.seq
00000007 00000028 00000040 00000000 /files/chr/kid/0010.seq
00000001 00000035 00000040 00000000 /files/chr/kid/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/kim/0000.seq
00000007 00000028 00000040 00000000 /files/chr/kim/0010.seq
00000001 0000002d 00000040 00000000 /files/chr/kim/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/kis/0000.seq
00000007 00000028 00000040 00000000 /files/chr/kis/0010.seq
00000001 00000026 00000040 00000000 /files/chr/kis/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/loc/0000.seq
00000007 00000028 00000040 00000000 /files/chr/loc/0010.seq
00000001 00000029 00000040 00000000 /files/chr/loc/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/miz/0000.seq
00000007 00000028 00000040 00000000 /files/chr/miz/0010.seq
00000001 00000025 00000040 00000000 /files/chr/miz/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/na9/0000.seq
00000007 00000028 00000040 00000000 /files/chr/na9/0010.seq
00000001 0000002d 00000040 00000000 /files/chr/na9/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/nar/0000.seq
00000007 00000028 00000040 00000000 /files/chr/nar/0010.seq
00000001 0000002e 00000040 00000000 /files/chr/nar/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/nej/0000.seq
00000007 00000028 00000040 00000000 /files/chr/nej/0010.seq
00000001 0000002b 00000040 00000000 /files/chr/nej/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/obo/0000.seq
00000007 00000028 00000040 00000000 /files/chr/obo/0010.seq
00000001 00000025 00000040 00000000 /files/chr/obo/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/oro/0000.seq
00000007 00000028 00000040 00000000 /files/chr/oro/0010.seq
00000001 00000029 00000040 00000000 /files/chr/oro/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/sa2/0000.seq
00000007 00000028 00000040 00000000 /files/chr/sa2/0010.seq
00000001 00000029 00000040 00000000 /files/chr/sa2/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/sak/0000.seq
00000007 00000028 00000040 00000000 /files/chr/sak/0010.seq
00000001 00000027 00000040 00000000 /files/chr/sak/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/sar/0000.seq
00000007 00000028 00000040 00000000 /files/chr/sar/0010.seq
00000001 00000028 00000040 00000000 /files/chr/sar/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/sas/0000.seq
00000007 00000028 00000040 00000000 /files/chr/sas/0010.seq
00000001 0000002b 00000040 00000000 /files/chr/sas/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/sik/0000.seq
00000007 00000028 00000040 00000000 /files/chr/sik/0010.seq
00000001 00000025 00000040 00000000 /files/chr/sik/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/sin/0000.seq
00000007 00000028 00000040 00000000 /files/chr/sin/0010.seq
00000001 00000026 00000040 00000000 /files/chr/sin/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/sko/0000.seq
00000007 00000028 00000040 00000000 /files/chr/sko/0010.seq
00000001 0000002a 00000040 00000000 /files/chr/sko/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/ta2/0000.seq
00000007 00000028 00000040 00000000 /files/chr/ta2/0010.seq
00000001 00000025 00000040 00000000 /files/chr/ta2/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/tay/0000.seq
00000007 00000028 00000040 00000000 /files/chr/tay/0010.seq
00000001 00000028 00000040 00000000 /files/chr/tay/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/tem/0000.seq
00000007 00000028 00000040 00000000 /files/chr/tem/0010.seq
00000001 00000028 00000040 00000000 /files/chr/tem/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/ten/0000.seq
00000007 00000028 00000040 00000000 /files/chr/ten/0010.seq
00000001 00000026 00000040 00000000 /files/chr/ten/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/tsu/0000.seq
00000007 00000028 00000040 00000000 /files/chr/tsu/0010.seq
00000001 0000002d 00000040 00000000 /files/chr/tsu/1000.seq
00000011 00000a48 00000040 00000000 /files/chr/zab/0000.seq
00000007 00000028 00000040 00000000 /files/chr/zab/0010.seq
00000001 00000025 00000040 00000000 /files/chr/zab/1000.seq
00000002 000001b0 00000040 00000000 /files/furu/f_camera.seq
00000002 000001a0 00000040 00000000 /files/game/camera00.seq
00000002 000001a0 00000040 00000000 /files/game/camera01.seq
00000006 0000006c 00000040 00000000 /files/game/game00.seq
00000010 00000020 00000020 00000000 /files/game/m_entry.seq
0000000c 00000040 00000040 00000000 /files/game/m_vs.seq
00000001 00000010 00000010 00000000 /files/game/player00.seq
00000006 00000040 00000040 00000000 /files/kuro/button.seq
0000000e 00000040 00000040 00000000 /files/kuro/loading.seq
00000001 00000010 00000010 00000000 /files/kuro/tmode.seq
0000000c 00000040 00000040 00000000 /files/maki/charsel4.seq
00000008 00000040 00000040 00000000 /files/maki/char_sel.seq
00000008 00000040 00000040 00000000 /files/maki/m_gal.seq
00000005 00000040 00000040 00000000 /files/maki/m_nfile.seq
00000006 00000040 00000040 00000000 /files/maki/m_nsiki.seq
00000007 00000040 00000040 00000000 /files/maki/m_sndplr.seq
0000001f 00000040 00000040 00000000 /files/maki/m_title.seq
00000008 00000040 00000040 00000000 /files/maki/m_viewer.seq
00000008 0000006c 00000020 00000000 /files/stg/001/0000.seq
00000004 00000040 00000020 00000000 /files/stg/001/0100.seq
00000009 0000006c 00000020 00000000 /files/stg/002/0000.seq
00000004 00000040 00000020 00000000 /files/stg/002/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/003/0000.seq
00000004 00000040 00000020 00000000 /files/stg/003/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/004/0000.seq
00000004 00000040 00000020 00000000 /files/stg/004/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/005/0000.seq
00000004 00000040 00000020 00000000 /files/stg/005/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/006/0000.seq
00000004 00000040 00000020 00000000 /files/stg/006/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/007/0000.seq
00000004 00000040 00000020 00000000 /files/stg/007/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/008/0000.seq
00000004 00000040 00000020 00000000 /files/stg/008/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/009/0000.seq
00000004 00000040 00000020 00000000 /files/stg/009/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/010/0000.seq
00000004 00000040 00000020 00000000 /files/stg/010/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/011/0000.seq
00000004 00000040 00000020 00000000 /files/stg/011/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/012/0000.seq
00000004 00000040 00000020 00000000 /files/stg/012/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/013/0000.seq
00000004 00000040 00000020 00000000 /files/stg/013/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/014/0000.seq
00000004 00000040 00000020 00000000 /files/stg/014/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/015/0000.seq
00000004 00000040 00000020 00000000 /files/stg/015/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/016/0000.seq
00000004 00000040 00000020 00000000 /files/stg/016/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/017/0000.seq
00000004 00000040 00000020 00000000 /files/stg/017/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/019/0000.seq
00000005 00000040 00000020 00000000 /files/stg/019/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/020/0000.seq
00000004 00000040 00000020 00000000 /files/stg/020/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/021/0000.seq
00000004 00000040 00000020 00000000 /files/stg/021/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/022/0000.seq
00000004 00000040 00000020 00000000 /files/stg/022/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/023/0000.seq
00000004 00000040 00000020 00000000 /files/stg/023/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/024/0000.seq
00000004 00000040 00000020 00000000 /files/stg/024/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/025/0000.seq
00000004 00000040 00000020 00000000 /files/stg/025/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/026/0000.seq
00000004 00000040 00000020 00000000 /files/stg/026/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/027/0000.seq
00000004 00000040 00000020 00000000 /files/stg/027/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/028/0000.seq
00000004 00000040 00000020 00000000 /files/stg/028/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/029/0000.seq
00000004 00000040 00000020 00000000 /files/stg/029/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/030/0000.seq
00000004 00000040 00000020 00000000 /files/stg/030/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/031/0000.seq
00000004 00000040 00000020 00000000 /files/stg/031/0100.seq
00000008 0000006c 00000020 00000000 /files/stg/032/0000.seq
00000004 00000040 00000020 00000000 /files/stg/032/0100.seq
00000016 00000040 00000040 00000000 /files/story/s00.seq
00000016 00000040 00000040 00000000 /files/story/s01.seq
00000016 00000040 00000040 00000000 /files/story/s02.seq
00000016 00000040 00000040 00000000 /files/story/s03.seq
00000016 00000040 00000040 00000000 /files/story/s04.seq
00000016 00000040 00000040 00000000 /files/story/s05.seq
00000016 00000040 00000040 00000000 /files/story/s06.seq
00000016 00000040 00000040 00000000 /files/story/s07.seq
00000016 00000040 00000040 00000000 /files/story/s08.seq
00000016 00000040 00000040 00000000 /files/story/s09.seq
00000016 00000040 00000040 00000000 /files/story/s0e.seq
00000016 00000040 00000040 00000000 /files/story/s10.seq
00000016 00000040 00000040 00000000 /files/story/s11.seq
00000016 00000040 00000040 00000000 /files/story/s12.seq
00000016 00000040 00000040 00000000 /files/story/s13.seq
00000016 00000040 00000040 00000000 /files/story/s14.seq
00000016 00000040 00000040 00000000 /files/story/s15.seq
00000016 00000040 00000040 00000000 /files/story/s16.seq
00000016 00000040 00000040 00000000 /files/story/s17.seq
00000016 00000040 00000040 00000000 /files/story/s18.seq
00000016 00000040 00000040 00000000 /files/story/s19.seq
00000016 00000040 00000040 00000000 /files/story/s1e.seq
00000016 00000040 00000040 00000000 /files/story/s20.seq
00000016 00000040 00000040 00000000 /files/story/s21.seq
00000016 00000040 00000040 00000000 /files/story/s22.seq
00000016 00000040 00000040 00000000 /files/story/s23.seq
00000016 00000040 00000040 00000000 /files/story/s24.seq
```

</details>

## SEQ Initialization

Before it is used, a SEQ file will first be initialized. This calls the function at 0x80099388 I call `seq_init()`. It takes three arguments.

1. The String of the SEQ file to be read, without the .seq extension. e.g. `"maki/charsel4"`
2. An unknown integer used during initialization of the seq initialization struct.
3. An unused value. Likely used during development.

This function will read the header and initialize a struct based on it.

<details>
  <summary>seq_init_struct</summary>

```psuedocode
seq_init_struct[0x0] = 0
seq_init_struct[0x1] = 0 (appears to have originally been used for something is no longer used)
seq_init_struct[0x2] = (SEQ Header Word 2) + (((SEQ Header Word 1 + 1) * 0x60) >> 2) + SEQ Header Word 1
seq_init_struct[0x3] = 0
seq_init_struct[0x4] = SEQ Header Word 1 + 1;
seq_init_struct[0x5] = SEQ Header Word 2
seq_init_struct[0x6] = SEQ Header Word 3
seq_init_struct[0x7] = Pointer made using 80222ba8 and seq_init_struct[0x2]
seq_init_struct[0x8] = seq_init_struct[7] + seq_init_struct[4] * 0x60
seq_init_struct[0x9] = seq_init_struct[8] + seq_init_struct[5] * 4
seq_init_struct[0xA] = pointer to something related to the file extension
seq_init_struct[0xb] = pointer to beginning of seq file data
seq_init_struct[0xc] = 0
seq_init_struct[0xd] = 0
seq_init_struct[0xe] = 0
seq_init_struct[0xf] = 0
seq_init_struct[0x10] = 0
Many pointers appear to be set after this based on the number of SEQ Header Word 1 using numbers derived from SEQ Header Word 2 and 3
```

</details>
